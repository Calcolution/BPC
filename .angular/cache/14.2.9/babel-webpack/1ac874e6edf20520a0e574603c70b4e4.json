{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/authentication.service\";\nimport * as i2 from \"../services/user.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/toolbar\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/button\";\nimport * as i11 from \"@angular/material/menu\";\nimport * as i12 from \"@angular/material/badge\";\n\nfunction ToolbarComponent_div_0_div_12_button_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ToolbarComponent_div_0_div_12_button_34_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r6.changeSelectedProfile(item_r5));\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"disabled\", \"@\" + item_r5.name === ctx_r4.selectedOrganisationName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.name);\n  }\n}\n\nfunction ToolbarComponent_div_0_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"mat-icon\", 13);\n    i0.ɵɵtext(2, \"notification_important\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-icon\", 14);\n    i0.ɵɵtext(4, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"div\")(7, \"mat-label\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"span\", 16);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"button\", 17)(13, \"mat-icon\");\n    i0.ɵɵtext(14, \"more_vert\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"mat-menu\", null, 18)(17, \"button\", 19)(18, \"mat-icon\", 20);\n    i0.ɵɵtext(19, \"store\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\");\n    i0.ɵɵtext(21, \"Stakeholder wechseln\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"button\", 21)(23, \"mat-icon\", 20);\n    i0.ɵɵtext(24, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\");\n    i0.ɵɵtext(26, \"Profil bearbeiten\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ToolbarComponent_div_0_div_12_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.logout());\n    });\n    i0.ɵɵelementStart(28, \"mat-icon\", 20);\n    i0.ɵɵtext(29, \"power_settings_new\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"span\");\n    i0.ɵɵtext(31, \"Logout\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(32, \"mat-menu\", 23, 24);\n    i0.ɵɵtemplate(34, ToolbarComponent_div_0_div_12_button_34_Template, 3, 2, \"button\", 25);\n    i0.ɵɵelementStart(35, \"button\", 21)(36, \"mat-icon\", 20);\n    i0.ɵɵtext(37, \"add_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"span\");\n    i0.ɵɵtext(39, \"neue Organisation\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(16);\n\n    const _r3 = i0.ɵɵreference(33);\n\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r1.fullUserName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.selectedOrganisationName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r3);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.organisations);\n  }\n}\n\nfunction ToolbarComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n    i0.ɵɵelement(2, \"img\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"mat-toolbar\", 5)(5, \"div\", 6)(6, \"mat-form-field\", 7)(7, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function ToolbarComponent_div_0_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.value = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ToolbarComponent_div_0_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.value = \"\");\n    });\n    i0.ɵɵelementStart(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"close\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(11, \"span\", 10);\n    i0.ɵɵtemplate(12, ToolbarComponent_div_0_div_12_Template, 40, 5, \"div\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.value);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.user);\n  }\n}\n\nexport let ToolbarComponent = /*#__PURE__*/(() => {\n  class ToolbarComponent {\n    constructor(authenticationService, userService, snackBar) {\n      this.authenticationService = authenticationService;\n      this.userService = userService;\n      this.snackBar = snackBar;\n      this.value = \"\";\n      this.fullUserName = \"\";\n      this.organisations = [];\n    }\n    /**\n    * initialize view at reading current session user and current session profile\n    */\n\n\n    ngOnInit() {\n      this.authenticationService.getUser().subscribe(user => {\n        if (user) {\n          this.user = user;\n          this.fullUserName = this.user.forename + \" \" + this.user.surname;\n          this.user.profiles.forEach(p => {\n            this.organisations.push(p.stakeholder);\n          });\n        }\n      });\n      this.userService.getSelectedProfile().subscribe(profile => {\n        if (profile) {\n          this.setSelectedOrganisationName(profile.stakeholder);\n        }\n      });\n    }\n    /**\n    * Method to logout the user\n    */\n\n\n    logout() {\n      this.authenticationService.logout().then(() => {\n        console.log(\"logout\");\n        this.snackBar.open('erfolgreich abgemeldet', 'Schließen');\n      });\n    }\n    /**\n     * Method to set the userName in the view\n     * @return the full name of the current authenticated user\n     *\n     */\n\n\n    userName() {\n      let u = this.authenticationService.userValue;\n\n      if (u) {\n        return u.fullName;\n      } else {\n        return \"\";\n      }\n    }\n    /**\n     * Method to detect if the user is authenticated and if the user component should be visible\n     * @return if the user is authenticated\n     */\n\n\n    isAuthenticated() {\n      return !!this.authenticationService.userValue;\n    }\n    /**\n     * Method to set the new selected Profile through the view\n     *\n     * @param organisation organisation to be selected\n     */\n\n\n    changeSelectedProfile(organisation) {\n      this.setSelectedOrganisationName(organisation);\n      let profile = this.userService.getProfileByStakeholder(this.user, organisation);\n\n      if (profile) {\n        this.userService.setSelectedProfile(profile);\n      }\n    }\n    /**\n     * Helper method to set the selectedOrganisationName within view\n     *\n     * @param organisation selectedOrganisation\n     */\n\n\n    setSelectedOrganisationName(organisation) {\n      this.selectedOrganisationName = \"@\" + organisation.name;\n    }\n\n  }\n\n  ToolbarComponent.ɵfac = function ToolbarComponent_Factory(t) {\n    return new (t || ToolbarComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  ToolbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ToolbarComponent,\n    selectors: [[\"app-toolbar\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"flex\", 4, \"ngIf\"], [1, \"flex\"], [1, \"logo_container\"], [\"src\", \"assets/img/logo_best_practice_club.png\", \"alt\", \"image\", 1, \"logo\"], [1, \"toolbar_container\"], [1, \"toolbar\"], [1, \"title\"], [\"appearance\", \"outline\", 1, \"search-form-field\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Suchen...\", 3, \"ngModel\", \"ngModelChange\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"click\"], [1, \"fill-space\"], [\"class\", \"right\", 4, \"ngIf\"], [1, \"right\"], [\"matBadge\", \"3\", \"color\", \"primary\", 1, \"toolbar_icon\"], [\"color\", \"primary\", 1, \"toolbar_icon\"], [1, \"user_organisation\"], [1, \"organisation_class\"], [\"mat-icon-button\", \"\", 3, \"matMenuTriggerFor\"], [\"userMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\"], [\"color\", \"primary\"], [\"mat-menu-item\", \"\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"xPosition\", \"before\"], [\"organisationMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-menu-item\", \"\", 3, \"disabled\", \"click\"]],\n    template: function ToolbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ToolbarComponent_div_0_Template, 13, 2, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated());\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.MatToolbar, i6.MatIcon, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.MatFormField, i8.MatLabel, i8.MatSuffix, i9.MatInput, i10.MatButton, i11.MatMenu, i11.MatMenuItem, i11.MatMenuTrigger, i12.MatBadge],\n    styles: [\".flex[_ngcontent-%COMP%]{display:flex}.toolbar_container[_ngcontent-%COMP%]{background-image:url(header_background.jpg);background-position:top;background-repeat:no-repeat;background-size:cover;display:flex;align-items:center;width:100%}.title[_ngcontent-%COMP%]{display:inline-flex;vertical-align:center;align-items:center}.title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-right:2%}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:2%;color:linear-gradient(270deg,rgb(78,115,150) 15%,rgb(164,165,18) 77%,rgb(112,113,70) 33%)}.search-form-field[_ngcontent-%COMP%]{width:500px}.logo_container[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{height:100px;width:220px}.toolbar[_ngcontent-%COMP%]{width:100%;background:transparent}.toolbar_icon[_ngcontent-%COMP%]{padding-left:10px;width:60px;height:60px;font-size:60px}.user_organisation[_ngcontent-%COMP%]{display:block;margin:auto;text-align:left}.organisation_class[_ngcontent-%COMP%]{font-size:17px}\"]\n  });\n  return ToolbarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}