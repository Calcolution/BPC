{"ast":null,"code":"import { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"../../services/question.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/tooltip\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"ng2-charts\";\nimport * as i9 from \"@angular/material/expansion\";\n\nfunction QuestionnaireCatalogComponent_mat_expansion_panel_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\")(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-description\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const answer_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", answer_r5.question.number, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", answer_r5.question.question, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(answer_r5.answer);\n  }\n}\n\nfunction QuestionnaireCatalogComponent_mat_expansion_panel_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\")(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-description\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const answer_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", answer_r6.question.number, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", answer_r6.question.question, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(answer_r6.answer);\n  }\n}\n\nfunction QuestionnaireCatalogComponent_mat_expansion_panel_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\")(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-description\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const answer_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", answer_r7.question.number, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", answer_r7.question.question, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(answer_r7.answer);\n  }\n}\n\nfunction QuestionnaireCatalogComponent_mat_expansion_panel_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\")(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-description\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const answer_r8 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", answer_r8.question.number, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", answer_r8.question.question, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(answer_r8.answer);\n  }\n}\n\nfunction QuestionnaireCatalogComponent_mat_expansion_panel_74_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\")(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-panel-description\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const answer_r9 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", answer_r9.question.number, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", answer_r9.question.question, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(answer_r9.answer);\n  }\n}\n\nexport let QuestionnaireCatalogComponent = /*#__PURE__*/(() => {\n  class QuestionnaireCatalogComponent {\n    constructor(userService, questionService, document) {\n      this.userService = userService;\n      this.questionService = questionService;\n      this.document = document;\n      this.QUESTIONNAIRE_URL = \"https://forms.office.com/Pages/ResponsePage.aspx?id=Lw23bt6O-UWFwacZHjWsImiealGHF1NGiTg0sJmxXsRUOElTOU1WNklFWVg1UEpDSUVUMTA2QTczUi4u&wdLOR=cDCC6003B-065A-3B4C-8615-6A6383F11050\";\n      this.stakeholderInformationToolTip = 'Allgemeine Fragen über den Stakeholder';\n      this.sectorToolTip = 'Fragen zur Bestimmung der relevanten Emmissionsaktivitäten und der Detailtiefe dieser Aktivitäten';\n      this.footprintToolTip = 'Fragen zur Selbsteinschätzung des Carbon Footprints';\n      this.fingerprintToolTip = 'Fragen zur Selbsteinschätzung der erzeugten Emissionen durch Verhaltensänderungen anderer durch Medien, Kommunikation und innovativen Ideen';\n      this.moneyToolTip = 'Fragen zur Selbsteinschätzung der Emissionen aus den Tätigkeiten als Kapitalgeber für Unternehmen und Projekten'; //answer categories\n\n      this.stakeholderInformation = [];\n      this.sectors = [];\n      this.footprint = [];\n      this.fingerprint = [];\n      this.money = [];\n      this.stakeholderName = '###'; //pie chart attributes\n\n      this.pieChartOptions = {\n        responsive: false\n      };\n      this.pieChartLabels = ['offen', 'beantwortet', 'in Arbeit'];\n      this.pieChartDatasets = [{\n        data: [20, 50, 30]\n      }];\n      this.pieChartLegend = true;\n      this.pieChartPlugins = []; //bar chart attributes\n\n      this.barChartLegend = false;\n      this.barChartPlugins = [];\n      this.barChartOptions = {\n        responsive: false\n      };\n    }\n    /**\n    * initialize barChart with data and reads the current selected profile to set up the questionnaire\n    */\n\n\n    ngOnInit() {\n      this.barChartData = {\n        labels: ['16', '18', '22', '24', '30'],\n        datasets: [{\n          data: [55, 53, 48, 39, 30],\n          label: 'in Prozent'\n        }]\n      };\n      this.userService.getSelectedProfile().subscribe(p => {\n        if (p) {\n          this.profile = p; //first setup Categories with answers from questionnaire\n\n          this.setupCategories(p.questionnaire.answers);\n          this.stakeholderName = p.stakeholder.name; //fill up Categories with all other questions\n\n          this.questionService.readAllQuestionsAsAnswers().subscribe(answers => this.setupCategories(answers));\n        }\n      });\n    }\n    /**\n    * initialize answers based on their category into these categories\n    * @param answers answers to set into categories\n    */\n\n\n    setupCategories(answers) {\n      answers.forEach(answer => {\n        switch (answer.question.category) {\n          case 'Stakeholderangaben':\n            {\n              if (!this.stakeholderInformation.some(a => a.question.number === answer.question.number)) {\n                this.stakeholderInformation.push(answer);\n              }\n\n              break;\n            }\n\n          case 'relevante Bereiche':\n            {\n              this.sectors.push(answer);\n              break;\n            }\n\n          case 'Handabdruck':\n            {\n              this.fingerprint.push(answer);\n              break;\n            }\n\n          case 'Fußabdruck':\n            {\n              this.footprint.push(answer);\n              break;\n            }\n\n          case 'Geldabdruck':\n            {\n              this.money.push(answer);\n              break;\n            }\n\n          default:\n            {\n              //should not get here\n              break;\n            }\n        }\n      });\n    }\n    /**\n    * opens microsoft-forms in a separate window\n    */\n\n\n    goToQuestionnaire() {\n      window.open(this.QUESTIONNAIRE_URL, \"_blank\");\n    }\n\n  }\n\n  QuestionnaireCatalogComponent.ɵfac = function QuestionnaireCatalogComponent_Factory(t) {\n    return new (t || QuestionnaireCatalogComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.QuestionService), i0.ɵɵdirectiveInject(DOCUMENT));\n  };\n\n  QuestionnaireCatalogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: QuestionnaireCatalogComponent,\n    selectors: [[\"app-questionnaire-catalog\"]],\n    decls: 81,\n    vars: 21,\n    consts: [[1, \"questionnaire_catalog_content\"], [1, \"grid_content\"], [1, \"grid_item\"], [1, \"card_box\"], [1, \"card_content_chart_type\"], [\"baseChart\", \"\", 1, \"pie_chart\", 3, \"type\", \"datasets\", \"labels\", \"options\", \"plugins\", \"legend\"], [1, \"catalog_grid_item\"], [1, \"fill-space\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Zum Fragebogen\", 1, \"align_right\", 3, \"click\"], [\"color\", \"primary\"], [1, \"card_content\"], [\"multi\", \"false\"], [\"color\", \"primary\", 3, \"matTooltip\"], [1, \"answer_content\"], [4, \"ngFor\", \"ngForOf\"], [\"multi\", \"false\", 1, \"answer_content\"], [1, \"card_content_chart\"], [\"baseChart\", \"\", 1, \"chart\", 3, \"data\", \"options\", \"plugins\", \"type\"]],\n    template: function QuestionnaireCatalogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"mat-card\", 3)(4, \"mat-card-title\");\n        i0.ɵɵtext(5, \" \\u00DCbersicht \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-card-content\", 4);\n        i0.ɵɵelement(7, \"canvas\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"mat-card\", 3)(10, \"mat-card-title\")(11, \"span\");\n        i0.ɵɵtext(12, \"Fragenkatalog\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"span\", 7);\n        i0.ɵɵelementStart(14, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function QuestionnaireCatalogComponent_Template_button_click_14_listener() {\n          return ctx.goToQuestionnaire();\n        });\n        i0.ɵɵelementStart(15, \"mat-icon\", 9);\n        i0.ɵɵtext(16, \"open_in_new\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"mat-card-content\", 10)(18, \"p\");\n        i0.ɵɵtext(19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"mat-accordion\", 11)(21, \"mat-expansion-panel\")(22, \"mat-expansion-panel-header\")(23, \"mat-panel-title\")(24, \"p\");\n        i0.ɵɵtext(25, \"Stakeholderangaben\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"span\", 7);\n        i0.ɵɵelementStart(27, \"mat-icon\", 12);\n        i0.ɵɵtext(28, \"info\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"div\", 13)(30, \"mat-accordion\", 11);\n        i0.ɵɵtemplate(31, QuestionnaireCatalogComponent_mat_expansion_panel_31_Template, 8, 3, \"mat-expansion-panel\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"mat-expansion-panel\")(33, \"mat-expansion-panel-header\")(34, \"mat-panel-title\")(35, \"p\");\n        i0.ɵɵtext(36, \"Relevante Bereiche\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"span\", 7);\n        i0.ɵɵelementStart(38, \"mat-icon\", 12);\n        i0.ɵɵtext(39, \"info\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(40, \"div\", 13)(41, \"mat-accordion\", 11);\n        i0.ɵɵtemplate(42, QuestionnaireCatalogComponent_mat_expansion_panel_42_Template, 8, 3, \"mat-expansion-panel\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"mat-expansion-panel\")(44, \"mat-expansion-panel-header\")(45, \"mat-panel-title\")(46, \"p\");\n        i0.ɵɵtext(47, \"Fu\\u00DFabdruck Selbsteinsch\\u00E4tzung\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"span\", 7);\n        i0.ɵɵelementStart(49, \"mat-icon\", 12);\n        i0.ɵɵtext(50, \"info\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(51, \"div\", 13)(52, \"mat-accordion\", 11);\n        i0.ɵɵtemplate(53, QuestionnaireCatalogComponent_mat_expansion_panel_53_Template, 8, 3, \"mat-expansion-panel\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(54, \"mat-expansion-panel\")(55, \"mat-expansion-panel-header\")(56, \"mat-panel-title\")(57, \"p\");\n        i0.ɵɵtext(58, \"Handabdruck Selbsteinsch\\u00E4tzung\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(59, \"span\", 7);\n        i0.ɵɵelementStart(60, \"mat-icon\", 12);\n        i0.ɵɵtext(61, \"info\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(62, \"mat-accordion\", 15);\n        i0.ɵɵtemplate(63, QuestionnaireCatalogComponent_mat_expansion_panel_63_Template, 8, 3, \"mat-expansion-panel\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(64, \"mat-expansion-panel\")(65, \"mat-expansion-panel-header\")(66, \"mat-panel-title\")(67, \"p\");\n        i0.ɵɵtext(68, \"Geldabdruck Selbsteinsch\\u00E4tzung\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(69, \"span\", 7);\n        i0.ɵɵelementStart(70, \"mat-icon\", 12);\n        i0.ɵɵtext(71, \"info\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(72, \"div\", 13)(73, \"mat-accordion\", 11);\n        i0.ɵɵtemplate(74, QuestionnaireCatalogComponent_mat_expansion_panel_74_Template, 8, 3, \"mat-expansion-panel\", 14);\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(75, \"div\", 2)(76, \"mat-card\", 3)(77, \"mat-card-title\");\n        i0.ɵɵtext(78, \" Top 5 Fragen der Community \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"mat-card-content\", 16);\n        i0.ɵɵelement(80, \"canvas\", 17);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"type\", \"pie\")(\"datasets\", ctx.pieChartDatasets)(\"labels\", ctx.pieChartLabels)(\"options\", ctx.pieChartOptions)(\"plugins\", ctx.pieChartPlugins)(\"legend\", ctx.pieChartLegend);\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\"Dieser Fragenbogen ist aus der Sicht des Stakeholders \", ctx.stakeholderName, \" ausgef\\u00FCllt\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.stakeholderInformationToolTip);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.stakeholderInformation);\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.sectorToolTip);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sectors);\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.footprintToolTip);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.footprint);\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.fingerprintToolTip);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fingerprint);\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx.moneyToolTip);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.money);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"data\", ctx.barChartData)(\"options\", ctx.barChartOptions)(\"plugins\", ctx.barChartPlugins)(\"type\", \"bar\");\n      }\n    },\n    dependencies: [i3.NgForOf, i4.MatIcon, i5.MatTooltip, i6.MatCard, i6.MatCardContent, i6.MatCardTitle, i7.MatButton, i8.BaseChartDirective, i9.MatAccordion, i9.MatExpansionPanel, i9.MatExpansionPanelHeader, i9.MatExpansionPanelTitle, i9.MatExpansionPanelDescription],\n    styles: [\".questionnaire_catalog_content[_ngcontent-%COMP%]{height:calc(100% - 10px);width:calc(100% - 10px);padding-left:10px;padding-top:10px}.grid_content[_ngcontent-%COMP%]{height:calc(100% - 10px);width:calc(100% - 10px);display:grid;grid-template-columns:calc(50% - 5px) calc(50% - 5px);grid-template-rows:calc(50% - 5px) calc(50% - 5px);gap:10px}.catalog_grid_item[_ngcontent-%COMP%]{grid-column:2;grid-row:1/span 2}.card_box[_ngcontent-%COMP%]{background:white;height:calc(100% - 26px);padding-bottom:10px}.card_content[_ngcontent-%COMP%]{margin:auto;width:100%;height:90%;overflow:auto}.answer_content[_ngcontent-%COMP%]{overflow:auto}.card_content_chart_type[_ngcontent-%COMP%]{height:inherit}.pie_chart[_ngcontent-%COMP%]{height:50%;margin:auto}.chart[_ngcontent-%COMP%]{min-width:75%;max-width:90%;height:90%;display:block;margin:auto}.card_content_chart[_ngcontent-%COMP%]{width:94%;height:85%}.align_right[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px}\"]\n  });\n  return QuestionnaireCatalogComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}